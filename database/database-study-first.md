# SQL Server 新入社員研修カリキュラム

本テキストは生成AIで作成したものをベースにしています。

## 🎯 研修の目的
本カリキュラムは、実務経験のない新入社員が SQL Server (T-SQL) の基礎を習得し、開発現場で自走できるレベルに到達することを目的としています。

**到達目標:**
* SSMSを使いこなし、エラーを自己解決できる。
* 社内システムのデータ構造を理解し、適切なデータ抽出・分析ができる。
* 開発者として、データを安全に更新・管理する作法（トランザクション等）を身につける。

---

## 📚 推奨学習リソース
基本知識のインプットや、辞書代わりとして使用してください。

* **教科書（基礎〜結合）:** [DB Online - SQL Server入門](https://www.dbonline.jp/sqlserver/)
* **概念理解（図解）:** [TECHSCORE - SQL](https://www.techscore.com/tech/sql/)
* **公式リファレンス:** [Microsoft Learn - Transact-SQL リファレンス](https://learn.microsoft.com/ja-jp/sql/t-sql/language-reference)
* **トラブルシューティング:** [Qiita (SQLServerタグ)](https://qiita.com/tags/sqlserver)

---

## 🛠️ Stage 0: 環境・解決力 (Tools & Troubleshooting)
**狙い:** 「動かない！」とすぐに聞くのではなく、エラーメッセージを読んで解決する自走力を養います。

- [ ] **0-1 SSMS基本操作**
    - サーバーへの接続方法
    - 新しいクエリの作成と実行 (F5)
    - インテリセンス（入力補完）の活用
- [ ] **0-2 クエリの部分実行**
    - 複数のSQL文から、選択した行だけを実行する操作
- [ ] **0-3 エラーメッセージ読解**
    - 赤文字（エラー）を翻訳して読む癖をつける
    - よくあるエラー（構文エラー、オブジェクト名無効）の特定
- [ ] **0-4 実行計画の確認**
    - 「推定実行プランの表示」ボタンの確認
    - 処理コストの概念理解

---

## 🏗️ Stage 0.5: データベース準備 (Environment Setup)
**狙い:** 社内システムの設計書を読み解き、自身の練習用環境（サンドボックス）を構築します。

- [ ] **0-5-1 設計書の解読**
    - ER図でテーブル間のリレーションを確認する
    - テーブル定義書（物理名/論理名、型、PK）を読み解く
- [ ] **0-5-2 テーブル作成 (DDL)**
    - GUIを使わず、`CREATE TABLE` 文を手書きして実行する
    - 社内テーブルと同じ構造（型・制約）を再現する
- [ ] **0-5-3 データ移行とマスキング**
    - `INSERT INTO ... SELECT` で開発環境からデータをコピーする
    - 個人情報（氏名・連絡先等）をダミーデータに変換するクエリを実装する

---

## 🔍 Stage 1: 単一テーブルのデータ抽出 (Basic Selection)
**狙い:** データベースの中身を正確に「見る」力をつけます。

- [ ] **1-1 基本の取得**
    - `SELECT`, `FROM`
    - 列の指定と別名 (`AS`) の定義
- [ ] **1-2 条件指定**
    - `WHERE` 句の使用
    - データ型（数値 vs 文字列）の区別
    - 比較演算子 (`=`, `>`, `<>`)
- [ ] **1-3 応用検索**
    - あいまい検索 (`LIKE`, `%`)
    - 複数条件 (`IN`, `BETWEEN`)
    - 論理演算子 (`AND`, `OR`) とカッコ `()` の優先順位
- [ ] **1-4 NULLと順序**
    - `IS NULL` / `IS NOT NULL` （`= NULL` が不可である理由）
    - `ORDER BY` による昇順・降順の制御

---

## 🔗 Stage 2: 結合と集計 (Join & Aggregate)
**狙い:** バラバラのデータを繋げ、意味のある帳票やレポートを作成します。

- [ ] **2-1 内部結合**
    - `INNER JOIN`
    - 結合キーの理解と、一致しないデータが除外される挙動の確認
- [ ] **2-2 外部結合**
    - `LEFT JOIN`
    - マスタテーブルを主（左）として残す考え方
    - 結合不一致時の `NULL` の発生
- [ ] **2-3 集計**
    - `GROUP BY`
    - 集計関数 (`SUM`, `COUNT`, `MAX`, `MIN`)
    - 明細行と集計行の違い
- [ ] **2-4 集計後の絞り込み**
    - `HAVING`
    - `WHERE`（集計前）と `HAVING`（集計後）の使い分け

---

## 🛡️ Stage 3: 更新とデータ整合性 (DML & Transaction)
**狙い:** アプリケーション開発者として、データを安全に管理・更新する責任感を養います。

- [ ] **3-1 データの登録**
    - `INSERT INTO ... VALUES`
    - 制約エラー（PK重複、NOT NULL）の体験
- [ ] **3-2 更新・削除**
    - `UPDATE`, `DELETE`
    - **事故防止:** 更新前に必ず `SELECT` で対象を確認する習慣
- [ ] **3-3 トランザクション制御**
    - `BEGIN TRANSACTION`
    - `COMMIT`（確定）と `ROLLBACK`（取り消し）
    - データ整合性の概念（All or Nothing）
- [ ] **3-4 サブクエリを用いた更新**
    - `UPDATE ... WHERE ... IN (SELECT ...)`
    - 他テーブルの条件に基づいた一括更新

---

## 🎓 Final Challenge: 卒業課題
**シナリオ: 「在庫引当処理の実装」**

以下の要件を満たす、単一のSQLスクリプトファイルを作成してください。

**要件:**
1.  **確認:** 特定の商品ID（例: 'A001'）の現在の在庫数を取得して表示する。
2.  **開始:** トランザクションを開始する。
3.  **実行:**
    * 売上テーブルに1件データを登録する（数量: 5）。
    * 在庫テーブルの数量を 5 減算する。
4.  **検証:**
    * 減算後の在庫数が「0以上」であれば、処理を **コミット（確定）** する。
    * もし在庫数が「マイナス」になった場合は、処理を **ロールバック（取り消し）** する。
    * 結果（成功か失敗か）をメッセージとして表示する。

---
